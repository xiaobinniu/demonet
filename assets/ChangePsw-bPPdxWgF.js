import{u as E,r as a,j as e,g as R}from"./index-TAAB46RF.js";import{u as L,ao as o,ap as k,ab as M,aq as T,at as V,a8 as j,ax as q,N as z}from"./useAuthNavi-1jCOrt3A.js";import{u as A}from"./App-o2wXzp9x.js";import{P as B}from"./PageBack-rZjQFXe2.js";import{s as l}from"./login.module-04NHvHkk.js";import"./Language-5SG9CA13.js";import"./copy-miSa-ocO.js";function J(){const{t:r}=L(),y=E(),f=a.useRef(null),w=a.useRef(null),[n,N]=a.useState(""),[u,P]=a.useState(!1),[m,C]=a.useState(""),[p,S]=a.useState(""),[i,g]=a.useState(!1);A(f,"right");const[h,x]=a.useState(0),d=a.useRef(0);a.useEffect(()=>()=>{d.current&&clearInterval(d.current)},[]);const v=a.useMemo(()=>o.phone(n)&&o.password(m)&&o.smscode(p),[n,m,p]);function _(t){let s=t.target.value;N(s)}function b(){o.phone(n)&&(h>0||(x(60),V(n).then(t=>{t.smsCode&&j.info(t.smsCode)}),d.current=window.setInterval(()=>{x(t=>t===0?(clearInterval(d.current),0):t-1)},1e3)))}function I(t){let s=t.target.value;C(s)}function $(){i||(g(!0),q(n,m,p).then(t=>{t.code===200&&(j.success(R("Modificado com sucesso")),z.setV({account:n,password:m}),y("/login"))}).finally(()=>{g(!1)}))}return e.jsxs("div",{className:"w-full h-screen overflow-hidden bg-grayPage relative",ref:f,children:[e.jsx(B,{}),e.jsxs("div",{className:"p-[0.22rem_0.18rem_0]",children:[e.jsxs("div",{className:"text-[.18rem] px-[0.56rem] text-center",children:[e.jsx("div",{className:"text-[#fcde26] leading-[.22rem]",children:r("Encontre sua conta")}),e.jsx("div",{className:"text-white text-[.12rem] my-[0.06rem] leading-[.2rem]",children:r("输入您的手机号码以搜索您的帐户")})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("span",{className:`text-[.14rem] ${l.inputicon}`,children:["+",k.phonePre]}),e.jsx("input",{type:"text",className:`${l.input} pl-[.28rem]`,placeholder:r("Número de Celular"),maxLength:11,onInput:t=>{const s=t.target,c=/[^\d]/g;s.value=s.value.replace(c,"")},onChange:_,ref:w})]}),e.jsxs("div",{className:"relative flex items-center justify-between",style:{opacity:!o.phone(n)||i?.4:1},children:[e.jsx("input",{type:`${u?"text":"password"}`,className:`${l.input} !w-2/3`,placeholder:r("sms"),maxLength:6,onInput:t=>{const s=t.target,c=/[^\d]/g;s.value=s.value.replace(c,"")},onChange:t=>S(t.target.value)}),e.jsx("button",{className:`${l.input} flex justify-center items-center !indent-0 !w-[30%] !bg-green !text-white`,style:{opacity:!o.phone(n)||i?.4:1},disabled:!o.phone(n)||i,onClick:b,children:h===0?r("smssend"):e.jsx(e.Fragment,{children:h})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:`${u?"text":"password"}`,className:`${l.input}`,placeholder:r("Senha"),maxLength:20,onInput:t=>{const s=t.target,c=/[^a-zA-Z0-9!@#$%^&*(),.?":{}|<>]+/g;s.value=s.value.replace(c,"")},onChange:I}),e.jsxs("div",{className:`text-[0.16rem] ${l["inputicon-after"]} !text-black`,onClick:()=>P(!u),children:[" ",u?e.jsx(M,{}):e.jsx(T,{})]})]}),e.jsx("div",{className:"m-[0.29rem_0_0.19rem]",children:e.jsx("button",{className:"h-[0.44rem] w-full bg-green text-white text-[.14rem] rounded-[4px]",style:{opacity:!v||i?.4:1},disabled:!v||i,onClick:$,children:r("确认")})})]})]})}export{J as default};
