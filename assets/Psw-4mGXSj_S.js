import{r as n,j as e,g as E}from"./index-TAAB46RF.js";import{u as k,ao as i,I as M,ap as v,ab as R,aq as z,at as T,a8 as y,ax as V,N as q,m as A}from"./useAuthNavi-1jCOrt3A.js";import{s as l,L as B}from"./Login-5bqvYMrF.js";const N="0.15rem",F={paddingLeft:N,paddingRight:N};function W({handleClose:x}){const{t:r}=k(),w=n.useRef(null),[a,_]=n.useState(""),[m,b]=n.useState(!1),[d,C]=n.useState(""),[p,I]=n.useState(""),[o,f]=n.useState(!1),[h,g]=n.useState(0),u=n.useRef(0);n.useEffect(()=>()=>{u.current&&clearInterval(u.current)},[]);const j=n.useMemo(()=>i.phone(a)&&i.password(d)&&i.smscode(p),[a,d,p]);function L(t){let s=t.target.value;_(s)}function S(){i.phone(a)&&(h>0||(g(60),T(a).then(t=>{t.smsCode&&y.info(t.smsCode)}),u.current=window.setInterval(()=>{g(t=>t===0?(clearInterval(u.current),0):t-1)},1e3)))}function P(t){let s=t.target.value;C(s)}function $(){o||(f(!0),V(a,d,p).then(t=>{t.code===200&&(y.success(E("Modificado com sucesso")),q.setV({account:a,password:d}),x(),A(B))}).finally(()=>{f(!1)}))}return e.jsx("div",{className:"g-mask flex justify-center items-center",children:e.jsxs("div",{className:"pc-modal w-[5rem] h-[6.5rem] bg-grayMenuBg",children:[e.jsxs("div",{className:"sticky top-0 left-0 z-10 w-full h-[0.45rem] bg-[#17191b] text-[0.16rem] flex items-center justify-between",style:F,children:[e.jsx("span",{}),e.jsxs("span",{onClick:x,children:[" ",e.jsx(M,{size:22,color:"#98a7b5"})]})]}),e.jsxs("div",{className:"p-[0.72rem_0.18rem_0]",children:[e.jsxs("div",{className:"text-[.18rem] px-[0.56rem] text-center",children:[e.jsx("div",{className:"text-[#56b83f] leading-[.22rem]",children:r("Encontre sua conta")}),e.jsx("div",{className:"text-white text-[.12rem] my-[0.06rem] leading-[.2rem]",children:r("输入您的手机号码以搜索您的帐户")})]}),e.jsx("div",{className:"relative h-[0.38rem] m-[0.13rem_0_0.04rem]",children:e.jsxs("div",{className:"relative h-[0.38rem] m-[0.13rem_0_0.04rem]",children:[e.jsxs("span",{className:`text-[.14rem] ${l.inputicon}`,children:["+",v.phonePre]}),e.jsx("input",{type:"text",className:`${l.input}  pl-[.28rem]`,placeholder:r("Número de Celular"),maxLength:v.phoneLength,onInput:t=>{const s=t.target,c=/[^\d]/g;s instanceof HTMLInputElement&&(s.value=s.value.replace(c,""))},onChange:L,ref:w})]})}),e.jsxs("div",{className:"relative h-[0.38rem] m-[0.13rem_0_0.04rem] flex items-center justify-between",children:[e.jsx("input",{type:`${m?"text":"password"}`,className:`${l.input} !w-2/3`,placeholder:r("sms"),maxLength:6,onInput:t=>{const s=t.target,c=/[^\d]/g;s.value=s.value.replace(c,"")},onChange:t=>I(t.target.value)}),e.jsx("button",{className:`${l.input} absolute !left-[unset] !right-0 !top-0 flex justify-center items-center !indent-0 !w-[30%] !bg-green !text-white`,style:{opacity:!i.phone(a)||o?.4:1},disabled:!i.phone(a)||o,onClick:S,children:h===0?r("smssend"):e.jsx(e.Fragment,{children:h})})]}),e.jsxs("div",{className:"relative h-[0.38rem] m-[0.13rem_0_0.04rem]",children:[e.jsx("input",{type:`${m?"text":"password"}`,className:`${l.input}`,placeholder:r("Senha"),maxLength:20,onInput:t=>{const s=t.target,c=/[^a-zA-Z0-9!@#$%^&*(),.?":{}|<>]+/g;s.value=s.value.replace(c,"")},onChange:P}),e.jsxs("div",{className:`text-[0.16rem] ${l["inputicon-after"]} !text-black`,onClick:()=>b(!m),children:[" ",m?e.jsx(R,{}):e.jsx(z,{})]})]}),e.jsx("div",{className:"mt-[0.2rem] mb-[0.19rem]",children:e.jsx("button",{className:"h-[0.44rem] w-full bg-green text-white  rounded-[4px] flex justify-center items-center",style:{opacity:!j||o?.4:1},disabled:!j||o,onClick:$,children:e.jsxs("span",{className:"text-[.14rem]",children:[" ",r("确认")]})})})]})]})})}export{W as default};
