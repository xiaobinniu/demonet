import{r as c,j as a}from"./index-B2SmKpul.js";import{i as v,b,U as x,am as B,c as f,o as w,u as E,E as m,ai as g}from"./useAuthNavi-F9d4edGU.js";async function j(){if(v.online==!1)return{vipLevel:"***",recharge:"***",totalBet:"***"};const e=await b.request(x.getVipInfo,{},"vipdata");return e.code===200?{vipLevel:e.data.vipLevel,recharge:e.data.recharge,totalBet:e.data.totalBet}:{vipLevel:"***",recharge:"***",totalBet:"***"}}async function V(){if(v.online==!1)return{recharge:"***",totalBet:"***"};try{const t=(await B()).vipConfig.data,s=Object.values(t);let r=f.getVipLevel();if(r==6)return{recharge:s[s.length-1].totalAmount,totalBet:s[s.length-1].totalBet};const i=s.find(l=>l.level==r+1);return{recharge:i.totalAmount,totalBet:i.totalBet}}catch{return{recharge:"***",totalBet:"***"}}}const _=w(y);let d={vipLevel:"***",recharge:"***",totalBet:"***"},h={recharge:"***",totalBet:"***"};function y(){const{t:e}=E(),[t,s]=c.useState(d),[r,i]=c.useState(h);c.useEffect(()=>(l(),m.addEvent(g.ONRECHARGEEND,l),()=>{m.removeEvent(g.ONRECHARGEEND,l)}),[f.getVipLevel()]);function l(){p(),N()}async function p(){const{vipLevel:o,totalBet:n,recharge:u}=await j();s({vipLevel:o,totalBet:n,recharge:u}),d={vipLevel:o,totalBet:n,recharge:u}}async function N(){const{totalBet:o,recharge:n}=await V();i({totalBet:o,recharge:n}),h={totalBet:o,recharge:n}}return a.jsxs("div",{className:"my-[0.2rem] w-11/12 mx-auto bg-gray rounded-sm p-[0.1rem_0.2rem_0.2rem]",children:[a.jsxs("div",{className:"text-[0.2rem] text-green font-bold flex items-center",children:[" ",e("当前VIP级别")," ",t.vipLevel]}),a.jsxs("p",{className:"mt-[0.1rem]",children:[e("充值总额")," ",t.recharge,"/",r.recharge]}),a.jsx("div",{className:"w-full h-[5px] bg-white rounded mt-[0.05rem] relative overflow-hidden",children:a.jsx("div",{className:"absolute left-0 top-0 h-full bg-green",style:{width:`${Number.isNumber(t.recharge)&&Number.isNumber(r.recharge)?`${100*Number(t.recharge)/Number(r.recharge)}%`:"0%"}`}})}),a.jsxs("p",{className:"mt-[0.1rem]",children:[e("下注总额")," ",t.totalBet,"/",r.totalBet]}),a.jsx("div",{className:"w-full h-[5px] bg-white rounded mt-[0.05rem] relative overflow-hidden",children:a.jsx("div",{className:"absolute left-0 top-0 h-full bg-green",style:{width:`${Number.isNumber(t.totalBet)&&Number.isNumber(r.totalBet)?`${100*Number(t.totalBet)/Number(r.totalBet)}%`:"0%"}`}})})]})}export{_ as V};
