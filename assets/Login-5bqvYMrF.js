import{r,j as e,_ as H,g as L}from"./index-TAAB46RF.js";import{u as Z,N as E,ao as o,t as w,I as K,ap as $,ab as Q,aq as X,aC as Y,aD as ee,ar as te,c as P,i as M,M as R,as as se,at as ne,a8 as re,b as ae,m as oe}from"./useAuthNavi-1jCOrt3A.js";const ie="_input_1b4xn_1",le="_inputicon_1b4xn_9",d={input:ie,inputicon:le,"inputicon-after":"_inputicon-after_1b4xn_17"},ce=""+new URL("adlogin-BIJ_rVqP.png",import.meta.url).href,me=r.lazy(()=>H(()=>import("./Psw-4mGXSj_S.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url));function ue({init:V,handleClose:h}){const{i18n:O,t:n}=Z(),g=r.useRef(null),j=r.useRef(null),[i,T]=r.useState(V),[a,v]=r.useState(""),[c,_]=r.useState(""),[x,z]=r.useState(!1),[y,q]=r.useState(""),[m,u]=r.useState(!1),[B,b]=r.useState(""),[N,k]=r.useState(0),p=r.useRef(0);r.useEffect(()=>(C(),()=>{p.current&&clearInterval(p.current)}),[]);function C(t){let s=E.getV(),l=t!==void 0?t:i;s&&l?(v(s.account),_(s.password),g.current.value=s.account,j.current.value=s.password):l||(v(""),_(""),g.current.value="",j.current.value="")}const f=r.useMemo(()=>i?o.phone(a)&&o.password(c):w.sms?o.phone(a)&&o.password(c)&&o.smscode(y):o.phone(a)&&o.password(c),[a,c,y,O.language]);function F(t){let s=t.target.value;v(s)}function W(t){let s=t.target.value;_(s)}function A(){i?D():G()}async function D(){if(f&&m==!1)try{u(!0);const t=await te(a,c);t.code==200?(P.setValue("uid",t.uid),M.setValue("token",t.token),R.setLocalstorageWithExpiration("token",t.token,5),S(t.token)):t.msg&&b(L(t.msg)),u(!1)}catch{u(!1)}}async function G(){if(f&&m==!1)try{u(!0);const t=await se(a,c,y);t.code==200?(P.setValue("uid",t.uid),M.setValue("token",t.token),R.setLocalstorageWithExpiration("token",t.token,5),S(t.token)):t.msg&&b(L(t.msg)),u(!1)}catch{u(!1)}}function J(){o.phone(a)&&(N>0||(k(60),ne(a).then(t=>{t.smsCode&&re.info(t.smsCode)}),p.current=window.setInterval(()=>{k(t=>t===0?(clearInterval(p.current),0):t-1)},1e3)))}function S(t){ae.init(t).then(()=>{E.setV({account:a,password:c}),h()})}function I(){T(t=>(C(!t),!t))}function U(){h(),oe(me,{},"Psw")}return e.jsx("div",{className:"g-mask flex justify-center items-center",children:e.jsxs("div",{className:"pc-modal w-[8rem] h-[6.5rem] bg-grayMenuBg flex items-center relative",children:[e.jsx("div",{className:"pc-modal-close",onClick:h,children:e.jsx(K,{})}),e.jsx("img",{src:ce,alt:"",className:"w-1/2 h-full"}),e.jsxs("div",{className:"w-1/2 h-full relative p-[0.3rem_0.17rem_0] ",children:[e.jsx("h2",{className:"text-[0.13rem] font-bold text-white",children:n(i?"Login":"注册")}),e.jsxs("div",{className:"relative h-[0.38rem] m-[0.13rem_0_0.04rem]",children:[e.jsxs("span",{className:`text-[.14rem] ${d.inputicon}`,children:["+",$.phonePre]}),e.jsx("input",{type:"text",className:`${d.input}  pl-[.28rem]`,placeholder:n("Número de Celular"),maxLength:$.phoneLength,onInput:t=>{const s=t.target,l=/[^\d]/g;s instanceof HTMLInputElement&&(s.value=s.value.replace(l,""))},onChange:F,ref:g})]}),e.jsxs("div",{className:"relative h-[0.38rem] m-[0.13rem_0_0.04rem] flex items-center justify-between",style:{display:`${i||w.sms==!1?"none":"flex"}`},children:[e.jsx("input",{type:`${x?"text":"password"}`,className:`${d.input} !w-2/3`,placeholder:n("sms"),maxLength:6,onInput:t=>{const s=t.target,l=/[^\d]/g;s.value=s.value.replace(l,"")},onChange:t=>q(t.target.value)}),e.jsx("button",{className:`${d.input} absolute !left-[unset] !right-0 !top-0 flex justify-center items-center !indent-0 !w-[30%] !bg-green !text-white`,style:{opacity:!o.phone(a)||m?.4:1},disabled:!o.phone(a)||m,onClick:J,children:N===0?n("smssend"):e.jsx(e.Fragment,{children:N})})]}),e.jsxs("div",{className:"relative h-[0.38rem] m-[0.13rem_0_0.04rem]",children:[e.jsx("input",{type:`${x?"text":"password"}`,className:`${d.input}`,placeholder:n("Senha"),maxLength:20,onInput:t=>{const s=t.target,l=/[^a-zA-Z0-9!@#$%^&*(),.?":{}|<>]+/g;s.value=s.value.replace(l,"")},onChange:W,ref:j}),e.jsxs("div",{className:`text-[0.16rem] ${d["inputicon-after"]} !text-black`,onClick:()=>z(!x),children:[" ",x?e.jsx(Q,{}):e.jsx(X,{})]})]}),i&&e.jsx("p",{className:"text-grayMenuFont mt-[.1rem] text-right text-[.12rem] cursor-pointer",onClick:U,children:n("Esqueci minha senha?")}),!i&&e.jsxs("div",{className:"text-grayMenuFont mt-[.1rem] text-[.12rem] flex items-start",children:[e.jsx("div",{className:"border-[#2d3035] border w-[0.14rem] h-[0.14rem] flex items-center justify-center text-[#348920] mr-[.07rem]",children:e.jsx(Y,{})}),e.jsxs("div",{children:[n("protocol1"),e.jsx("span",{className:"capitalize text-white cursor-pointer",children:n("protocol2")}),n("protocol3")]})]}),e.jsxs("div",{className:"mt-[0.2rem] mb-[0.19rem]",children:[e.jsx("p",{className:"mb-[.06rem] text-center text-[#e53535] text-[0.12rem]",children:B}),e.jsx("button",{className:"h-[0.44rem] w-full bg-green text-white  rounded-[4px] flex justify-center items-center",style:{opacity:!f||m?.4:1},disabled:!f||m,onClick:A,children:e.jsxs("span",{className:"text-[.14rem]",children:[" ",n(i?"Login":"Criar conta")]})})]}),i?e.jsxs("div",{className:"flex items-center justify-center cursor-pointer",children:[e.jsx("span",{className:"text-[0.12rem] text-[#d4d9e6] text-center",children:"Novo no brplay.io? "}),e.jsx("span",{className:"text-[0.12rem] text-[#26a417] text-center",onClick:I,children:n("Criar Conta Nova")})]}):e.jsx("div",{className:"flex items-center justify-center cursor-pointer",onClick:I,children:e.jsxs("span",{className:"text-[0.12rem] text-white",children:[n("Já tem uma conta? Log in")," ",e.jsx("span",{className:"text-[0.12rem] text-[#26a417] text-center",children:n("Criar conta")}),"  "]})}),e.jsxs("div",{className:"google",style:{display:`${w.google==!1&&"none"}`},children:[e.jsx("div",{className:"py-[0.2rem] mt-[0.36rem]",children:e.jsxs("div",{className:"line h-[0.01rem] px-[0.01rem] flex items-center justify-center",children:[e.jsx("div",{className:"h-[1px] flex-1 bg-[#4d565e]"}),e.jsx("div",{className:"text-[0.12rem] mx-[0.2rem] text-[#656e78] scale-90",children:n("OU")}),e.jsx("div",{className:"h-[1px] flex-1 bg-[#4d565e]"})]})}),e.jsx("div",{className:"mx-auto flex items-center justify-center w-[0.65rem] h-[0.4rem] border-[0.01px] border-[#586574] rounded-[0.02rem] text-[#8399ac] text-[0.22rem]",children:e.jsx(ee,{})})]})]})]})})}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{ue as L,pe as a,d as s};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./Psw-4mGXSj_S.js","./index-TAAB46RF.js","./index-I2ukgJqg.css","./useAuthNavi-1jCOrt3A.js","./useAuthNavi-akfXessv.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
