import{u as J,r,j as s}from"./index-TAAB46RF.js";import{P as K}from"./PageBack-rZjQFXe2.js";import{p as O}from"./pix-mObmh9gV.js";import{u as Q,ao as y,i as X,b as u,U as m,_ as Y,ap as A,h as ee,av as ae,c as j,a8 as te}from"./useAuthNavi-1jCOrt3A.js";import"./Language-5SG9CA13.js";function oe(){const E=J(),{t:n}=Q(),p=[{id:1,type:"CPF",placeholder:"000.000.000-00"},{id:3,type:n("Número de Celular"),placeholder:n("账号位数数字")},{id:2,type:n("EMAIL"),placeholder:n("EMAIL")}],[b,F]=r.useState(""),[i,w]=r.useState(p[0]),[P,x]=r.useState(!1),[c,l]=r.useState(""),[B,se]=r.useState(""),[_,T]=r.useState(0),[q,D]=r.useState("4"),[L,M]=r.useState(0),[k,G]=r.useState([100,1e4]),[o,h]=r.useState({passport:"",email:"",phone:"",realName:"",bankType:1,pixDict:1}),C=r.useMemo(()=>{let a;switch(i.id){case 1:a=y.validarCPF(c);break;case 3:a=y.phone(c);break;case 2:a=y.email(c);break;default:a=!0;break}return Number(b)>=k[0]&&a&&_>=0},[c,b]),v=r.useRef(0);function R(a){const t=a.target;switch(i.id){case 1:if(t.maxLength=14,v.current<t.value.length){let e=t.value.replace(/[^0-9]/g,"");e.length>=3&&e.length<6?e=e.slice(0,3)+"."+e.slice(3):e.length>=6&&e.length<9?e=e.slice(0,3)+"."+e.slice(3,6)+"."+e.slice(6):e.length>=9&&(e=e.slice(0,3)+"."+e.slice(3,6)+"."+e.slice(6,9)+"-"+e.slice(9)),t.value=e}else t.value=t.value.slice(0,t.selectionStart);l(t.value),v.current=t.value.length;break;case 3:t.maxLength=A.phoneLength,t.value=t.value.replace(/[^0-9]/g,""),l(t.value);break;case 2:t.value=t.value.replace(/[^a-zA-Z0-9@.]/,""),l(t.value);break}}function $(a){l(a.target.value)}function U(a){const t=a.target;t.value=t.value.replace(/[^0-9\.]/g,"").replace(/(\..*)\./g,"$1")}function W(a){F(a.target.value)}async function z(){switch(i.id){case 1:o.passport?g():N(1);break;case 3:o.phone?g():N(3);break;case 2:o.email?g():N(2);break;default:l("");break}}async function N(a){let t;switch(a){case 1:t=await u.request(m.bindBankCard,{passport:c,realName:j.getNickname(),bankType:1,pixDict:1}),t.code==200&&h({...o,passport:c});break;case 3:t=await u.request(m.bindBankCard,{phone:c,realName:j.getNickname(),bankType:1,pixDict:3}),t.code==200&&h({...o,phone:c});break;case 2:t=await u.request(m.bindBankCard,{email:c,realName:j.getNickname(),bankType:1,pixDict:2}),t.code==200&&h({...o,email:c});break}return t.code==200?(g(),!0):!1}async function g(){(await u.request(m.exchangeGold,{gold:b})).code===200&&te.success("提现成功")}r.useEffect(()=>{X.online&&Z()},[]);function V(a){w(a),I(a.id)}function I(a,t){let e,f=a||i.id,d=t||o;switch(f){case 1:e=d.passport,l(e);break;case 3:e=d.phone,l(e);break;case 2:e=d.email,l(e);break;default:l("");break}}async function Z(){u.request(m.getExchangeInfo,{},"").then(a=>{var t;if(a.code===200){const e=(t=a.data)==null?void 0:t.bankInfo;if(!Y.isEmpty(e)){let f=e.bankPhone.replace(`+${A.phonePre}`,""),d={passport:e.bankCard==="123456789"?"":e.bankCard,email:e.bankEmail==="123456789@gmail.com"?"":e.bankEmail,phone:f==="123456789"?"":f,realName:e.realName,bankType:1,pixDict:e.pixDict};h(d);let S=p.find(H=>H.id==e.pixDict)||p[0];w(S),I(S.id,d)}G(a.data.range),D(a.data.withdrawRate),T(a.data.exchangeCnt),M(a.data.exchangeGold)}})}return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-[0.44rem_0.18rem_1rem] bg-grayPage w-full min-h-[100vh]",children:[s.jsxs("div",{className:"fixed top-0 w-full left-0",children:[" ",s.jsx(K,{children:n("提现")})]}),s.jsx("img",{src:O,alt:"",className:"h-[.27rem] m-[0.12rem_0]"}),s.jsx("div",{className:"text-[#ffdd25] text-[.12rem]",children:n("withtip")}),s.jsx("div",{className:"mt-[.2rem]",children:n("accountTip")}),s.jsxs("div",{className:"flex items-center bg-grayInputBg text-grayInputFont rounded-[4px] m-[0.07rem_0]",children:[s.jsxs("div",{className:"flex items-center text-white",onClick:()=>x(!0),children:[s.jsx("div",{className:"mx-[0.1rem] whitespace-nowrap",children:i.type}),s.jsx("div",{className:"",children:s.jsx(ee,{})})]}),s.jsx("input",{type:"text",className:"text-[.14rem] w-full h-[0.48rem] bg-grayInputBg text-grayInputFont rounded-[0.05rem] indent-[.06rem] placeholder:text-grayInputFont",placeholder:i.placeholder,onInput:R,onChange:$,value:c})]}),s.jsx("div",{className:"mt-[.18rem]",children:n("Montante")}),s.jsx("div",{className:"flex items-center bg-grayInputBg text-grayInputFont rounded-[4px] m-[0.07rem_0]",children:s.jsx("input",{type:"text",className:"text-[.14rem] w-full h-[0.48rem] bg-grayInputBg text-grayInputFont rounded-[0.05rem] indent-[.06rem] placeholder:text-grayInputFont",placeholder:`${n("Min.",{num:k[0]})} ${n("Max.",{num:k[1]})}`,onInput:U,onChange:W})}),s.jsx("div",{className:"text-[.13rem] mt-[.16rem] text-white",children:s.jsxs("ul",{children:[s.jsxs("li",{className:"leading-[.23rem]",children:[n("可提款"),s.jsxs("span",{className:"text-[.12rem] text-[#fcde26]",children:[" ",L," ",n("货币")]})]}),s.jsx("li",{className:"leading-[.23rem]",children:n("Withdrawal fees",{num:q})}),s.jsxs("li",{className:"leading-[.23rem]",children:[n("Para aumentar seu saldo disponível"),s.jsxs("span",{className:"text-[.12rem] text-green",onClick:()=>{E("/")},children:[" ",n("Aposte Agora")]})]})]})}),s.jsxs("div",{className:"text-[.14rem]",children:[s.jsx("div",{className:"text-[#e53535] mt-[0.1rem]",children:B}),s.jsxs("button",{className:"w-full h-[0.44rem] text-white m-[0.26rem_0_0.14rem] uppercase",style:{background:"linear-gradient(180deg,#ff9323,#ff6a01)",opacity:C?1:.4},disabled:!C,onClick:z,children:[n("saque")," (",_,")"]}),s.jsx("div",{className:"text-[.12rem] text-[#c7c7c7] leading-[.15rem]",children:"Saques podem sofrer atrasos devido a falhas contínuas no sistema bancário por dois dias"})]})]}),s.jsxs(ae,{visible:P,closeable:!0,className:"h-[2rem] flex flex-col",position:"bottom",round:!0,onClose:()=>x(!1),children:[p.map(a=>s.jsx("button",{className:`w-full h-[0.5rem] p-[14px_16px] text-center  text-[16px] ${a.id===i.id?"text-green":"text-black"}`,onClick:()=>{x(!1),V(a),v.current=0},children:a.type},a.id)),s.jsx("div",{className:"w-full h-[0.05rem] bg-[#f7f8fa]"}),s.jsx("button",{className:"w-full h-[0.5rem] text-black p-[14px_16px] text-center  text-[16px] ",onClick:()=>x(!1),children:n("Cancelar")})]})]})}export{oe as default};
